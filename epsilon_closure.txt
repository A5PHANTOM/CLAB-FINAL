PROGRAM( c 
out:
q0 e q1
q0 a q2
q1 e q3
q2 b q1
q3 e q4
)

#include <stdio.h>
#include <string.h>

char result[20][20], copy[3], states[20][20];

void add_state(char a[3], int i) {
    strcpy(result[i], a);
}

void display(int n) {
    int k = 0;
    printf("\n\nEpsilon closure of %s = {", copy);
    while (k < n) {
        printf("%s", result[k]);
        if (k < n - 1) printf(", ");
        k++;
    }
    printf("}\n\n");
}

int main() {
    FILE *input;
    char state[3], state1[3], state2[3], input_symbol[3];
    int end, i, n, k;

    input = fopen("input.dat", "r");
    if (input == NULL) { 
        printf("Error: couldn't open input.dat\n");
        return 1;
    }

    printf("\nEnter the number of states: ");
    scanf("%d", &n);
    printf("\nEnter the states:\n");

    for (k = 0; k < n; k++) {
        scanf("%s", states[k]);
    }

    printf("\nEnter the state whose epsilon closure is to be found: ");
    scanf("%s", state);
    strcpy(copy, state);

    i = 0;
    add_state(state, i++);

    while (!feof(input)) {
        end = fscanf(input, "%s %s %s", state1, input_symbol, state2);
        if (end == EOF)

  break;

        if (strcmp(state1, state) == 0 && strcmp(input_symbol, "e") == 0) { 
            add_state(state2, i++);
        }
    }

    display(i);
    fclose(input);
    return 0;
}


OUTPUT:

3
q1 q2 q3

